(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-623f","chunk-24c7","chunk-6dff","chunk-1959"],{"14Xm":function(t,e,i){t.exports=i("ls82")},"3ADX":function(t,e,i){"use strict";var n=i("14Xm"),r=i.n(n),s=i("4d7F"),a=i.n(s),o=i("D3Ub"),l=i.n(o),c=i("t3Un");function u(t,e){return Object(c.a)({url:t,method:"get",params:e})}e.a={data:function(){return{loading:!0,data:[],page:0,size:10,total:0,url:"",params:{},query:{},time:170,isAdd:!1}},methods:{init:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.beforeInit();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new a.a(function(e,i){t.loading=!0,u(t.url,t.params).then(function(i){t.total=i.totalElements,t.data=i.content,setTimeout(function(){t.loading=!1},t.time),e(i)}).catch(function(e){t.loading=!1,i(e)})}));case 5:case"end":return e.stop()}},e,t)}))()},beforeInit:function(){return!0},pageChange:function(t){this.page=t-1,this.init()},sizeChange:function(t){this.page=0,this.size=t,this.init()},dleChangePage:function(t){void 0===t&&(t=1),this.data.length===t&&0!==this.page&&(this.page=this.page-1)},toQuery:function(){this.page=0,this.init()}}}},"41Be":function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i("Q2AE");function r(t){if(t&&t instanceof Array&&t.length>0){var e=t;return!!(n.a.getters&&n.a.getters.roles).some(function(t){return e.includes(t)})}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}},"9mtZ":function(t,e,i){"use strict";var n=i("opeI");i.n(n).a},Al3y:function(t,e,i){"use strict";i.r(e);var n,r=i("YEIV"),s=i.n(r),a=i("prnK"),o=i("QzFo"),l=i("WJVB"),c=i("Fi4A"),u={components:{contact:l.default,Address:c.default},props:{isAdd:{type:Boolean,required:!0}},data:function(){return{dialog:!1,categoryList:[],form:{supplierContact:[{name:"",phone:"",mobile:"",email:"",weixin:"",qq:"",firstTag:1}],supplierName:"",initialPreMoney:null,supplierCode:null,supplierAddress:[{province:"",city:"",area:"",addressDetail:""}],supplierCategoryId:null,remark:""},rules:{supplierName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],supplierCategoryId:[{required:!0,message:"请选择供应商类型",trigger:"change",type:"number"}],supplierCode:[{required:!0,message:"供应商编号不能为空",trigger:"change"}]}}},watch:{dialog:function(t){t&&this.isAdd&&this.initCode()}},created:function(){this.queryAllCategoryList()},methods:(n={cancel:function(){this.dialog=!1},doSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(e){if(t.form.supplierContact){var i=t.form.supplierContact.length;i>0&&!t.form.supplierContact[i-1].name&&t.form.supplierContact.pop()}if(t.form.supplierAddress){var n=t.form.supplierAddress.length;n>0&&!t.form.supplierAddress[n-1].province&&t.form.supplierAddress.pop()}t.isAdd?Object(a.a)(t.form).then(function(e){t.$notify({title:"添加成功",type:"success",duration:2500}),t.resetForm(),t.dialog=!1,t.$parent.init()}):Object(a.c)(t.form).then(function(e){t.$notify({title:"修改成功",type:"success",duration:2500}),t.resetForm(),t.dialog=!1,t.$parent.init()})}})},initCode:function(){var t=this;Object(a.e)().then(function(e){t.resetForm(),t.form.supplierCode=e})},queryAllCategoryList:function(){var t=this;Object(o.d)().then(function(e){t.categoryList=e})},resetForm:function(){this.form={supplierContact:[{name:"",phone:"",mobile:"",email:"",weixin:"",qq:"",firstTag:1}],supplierName:"",initialPreMoney:null,supplierAddress:[{province:"",city:"",area:"",addressDetail:""}]}}},s()(n,"initCode",function(){var t=this;Object(a.e)().then(function(e){t.resetForm(),t.form.supplierCode=e})}),s()(n,"queryAllCategoryList",function(){var t=this;Object(o.d)().then(function(e){t.categoryList=e})}),s()(n,"resetForm",function(){this.form={supplierContact:[{name:"",phone:"",mobile:"",email:"",weixin:"",qq:"",firstTag:1}],supplierName:"",initialPreMoney:null,supplierAddress:[{province:"",city:"",area:"",addressDetail:""}],supplierCategoryId:null,remark:""}}),s()(n,"updateContact",function(t){this.form.supplierContact=t}),s()(n,"updateAddress",function(t){this.form.supplierAddress=t}),n)},d=(i("9mtZ"),i("KHd+")),p=Object(d.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialog,title:t.isAdd?"新增供应商资料":"编辑供应商资料","append-to-body":"",width:"1000px","show-close":!1},on:{"update:visible":function(e){t.dialog=e}}},[i("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"large","label-width":"100px"}},[i("el-form-item",{attrs:{label:"供应商编号",prop:"supplierCode"}},[i("el-input",{attrs:{size:"small"},model:{value:t.form.supplierCode,callback:function(e){t.$set(t.form,"supplierCode",e)},expression:"form.supplierCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"供应商名称",prop:"supplierName"}},[i("el-input",{attrs:{size:"small"},model:{value:t.form.supplierName,callback:function(e){t.$set(t.form,"supplierName",e)},expression:"form.supplierName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"supplierCategoryId"}},[i("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"small"},model:{value:t.form.supplierCategoryId,callback:function(e){t.$set(t.form,"supplierCategoryId",e)},expression:"form.supplierCategoryId"}},t._l(t.categoryList,function(t,e){return i("el-option",{key:t.name+e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("Address",{attrs:{propList:t.form.supplierAddress},on:{setAddress:t.updateAddress}}),t._v(" "),i("el-form-item",{staticStyle:{display:"block","margin-top":"20px"},attrs:{label:"期初应付款(元)",prop:"initialPreMoney"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.form.initialPreMoney,callback:function(e){t.$set(t.form,"initialPreMoney",e)},expression:"form.initialPreMoney"}})],1),t._v(" "),i("contact",{attrs:{contactList:t.form.supplierContact},on:{setContacts:t.updateContact}}),t._v(" "),i("el-form-item",{attrs:{prop:"remark"}},[i("el-input",{staticStyle:{width:"500px","margin-top":"20px"},attrs:{type:"textarea",rows:4,placeholder:"备注信息"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.doSubmit}},[t._v("确认")])],1)],1)},[],!1,null,"540600d5",null);p.options.__file="form.vue";e.default=p.exports},D3Ub:function(t,e,i){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i("4d7F"));e.default=function(t){return function(){var e=t.apply(this,arguments);return new n.default(function(t,i){return function r(s,a){try{var o=e[s](a),l=o.value}catch(t){return void i(t)}if(!o.done)return n.default.resolve(l).then(function(t){r("next",t)},function(t){r("throw",t)});t(l)}("next")})}}},Fi4A:function(t,e,i){"use strict";i.r(e);var n=i("EJiy"),r=i.n(n),s=i("vDqi"),a=i.n(s),o={props:["propList"],data:function(){return{mapJson:"../../../static/map.json",provinceList:[],shi1:[],qu1:[],cityList:[],block:[],addressList:[]}},created:function(){this.getCityData(),this.addressList=this.propList},watch:{propList:function(t){this.addressList=t}},methods:{getCityData:function(){var t=this;a.a.get(this.mapJson).then(function(e){if(200==e.status){var i=e.data;for(var n in t.provinceList=[],t.cityList=[],t.block=[],i)n.match(/0000$/)?t.provinceList.push({id:n,value:i[n],children:[]}):n.match(/00$/)?t.cityList.push({id:n,value:i[n],children:[]}):t.block.push({id:n,value:i[n]});for(var r in t.provinceList)for(var s in t.cityList)t.provinceList[r].id.slice(0,2)===t.cityList[s].id.slice(0,2)&&t.provinceList[r].children.push(t.cityList[s]);for(var a in t.cityList)for(var o in t.block)t.block[o].id.slice(0,4)===t.cityList[a].id.slice(0,4)&&t.cityList[a].children.push(t.block[o])}else console.log(e.status)}).catch(function(t){console.log(r()(+t))})},choseProvince:function(t,e){for(var i in this.provinceList)t===this.provinceList[i].id&&(this.shi1=this.provinceList[i].children,this.addressList[e].city=this.provinceList[i].children[0].value,this.qu1=this.provinceList[i].children[0].children,this.addressList[e].area=this.provinceList[i].children[0].children[0].value,this.E=this.qu1[0].id,this.addressList[e].province=this.provinceList[i].value);this.setAddress()},choseCity:function(t,e){for(var i in this.cityList)t===this.cityList[i].id&&(this.qu1=this.cityList[i].children,this.addressList[e].area=this.cityList[i].children[0].value,this.E=this.qu1[0].id,this.addressList[e].city=this.cityList[i].value);this.setAddress()},choseBlock:function(t,e){for(var i in this.E=t,this.block)t===this.block[i].id&&(this.addressList[e].area=this.block[i].value);this.setAddress()},add:function(){this.propList.push({province:"",city:"",area:"",addressDetail:""})},subDelete:function(t){t>0?this.propList.splice(t,1):this.$notify({title:"至少保留一行",type:"warning",duration:2500})},setAddress:function(){this.$emit("setAddress",this.propList)}}},l=(i("xGpv"),i("KHd+")),c=Object(l.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"linkage"},t._l(t.addressList,function(e,n){return i("div",{key:n,staticStyle:{"margin-bottom":"20px"}},[i("span",{staticClass:"label"},[t._v("\n      联系地址"+t._s(n+1)+"：\n    ")]),t._v(" "),i("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"省级地区"},on:{change:function(e){t.choseProvince(e,n)}},model:{value:e.province,callback:function(i){t.$set(e,"province",i)},expression:"v.province"}},t._l(t.provinceList,function(t){return i("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),i("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"市级地区"},on:{change:function(e){t.choseCity(e,n)}},model:{value:e.city,callback:function(i){t.$set(e,"city",i)},expression:"v.city"}},t._l(t.shi1,function(t){return i("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),i("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"区级地区"},on:{change:function(e){t.choseBlock(e,n)}},model:{value:e.area,callback:function(i){t.$set(e,"area",i)},expression:"v.area"}},t._l(t.qu1,function(t){return i("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),i("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"详细地址",size:"small"},on:{change:t.setAddress},model:{value:e.addressDetail,callback:function(i){t.$set(e,"addressDetail",i)},expression:"v.addressDetail"}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.add}},[t._v("添加")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){t.subDelete(n)}}},[t._v("删除")])],1)}))},[],!1,null,"49434cfc",null);c.options.__file="address.vue";e.default=c.exports},JQMN:function(t,e,i){},QzFo:function(t,e,i){"use strict";i.d(e,"d",function(){return r}),i.d(e,"a",function(){return s}),i.d(e,"c",function(){return a}),i.d(e,"b",function(){return o});var n=i("t3Un");function r(){return Object(n.a)({url:"api/queryAllCategoryList",method:"get"})}function s(t){return Object(n.a)({url:"api/supplierCategory",method:"post",data:t})}function a(t){return Object(n.a)({url:"api/supplierCategory",method:"put",data:t})}function o(t){return Object(n.a)({url:"api/supplierCategory/"+t,method:"delete"})}},"RU/L":function(t,e,i){i("Rqdy");var n=i("WEpk").Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},Rqdy:function(t,e,i){var n=i("Y7ZC");n(n.S+n.F*!i("jmDH"),"Object",{defineProperty:i("2faE").f})},SEkw:function(t,e,i){t.exports={default:i("RU/L"),__esModule:!0}},TIGl:function(t,e,i){},WJVB:function(t,e,i){"use strict";i.r(e);var n=i("gDS+"),r=i.n(n),s={props:["contactList"],data:function(){return{master_user:{sel:null,columns:[{field:"name",title:"联系人",width:120},{field:"mobile",title:"手机",width:120},{field:"phone",title:"座机",width:160},{field:"email",title:"邮箱",width:160},{field:"weixin",title:"微信",width:120},{field:"qq",title:"QQ",width:120},{field:"firstTag",title:"首要联系人",width:120,type:"select"}],data:[],options:[{id:1,name:"是"},{id:0,name:"否"}]}}},created:function(){this.addMasterUser(),this.master_user.data=this.contactList},watch:{contactList:function(t){this.master_user.data=t}},methods:{setContact:function(){this.$emit("setContacts",this.master_user.data)},addMasterUser:function(){var t={name:"",phone:"",mobile:"",email:"",weixin:"",qq:"",firstTag:1};this.master_user.data.push(t),this.master_user.sel=JSON.parse(r()(t))},del:function(t){this.master_user.data.length>1?this.master_user.data.splice(t,1):this.$message.warning("至少保留一项")}}},a=(i("sYzC"),i("KHd+")),o=Object(a.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",[i("el-col",[i("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:t.master_user.data,border:"","highlight-current-row":"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}}},[i("el-table-column",{attrs:{label:"操作",width:"100",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"el-tag el-tag--danger el-tag--mini",staticStyle:{cursor:"pointer"},on:{click:function(i){t.del(e.$index)}}},[t._v("\n                              删除\n                          ")]),t._v(" "),i("span",{staticClass:"el-tag  el-tag--mini",staticStyle:{cursor:"pointer"},on:{click:function(e){t.addMasterUser()}}},[t._v("\n                              添加\n                          ")])]}}])}),t._v(" "),t._l(t.master_user.columns,function(e,n){return i("el-table-column",{key:e.field,attrs:{prop:e.field,label:e.title,width:e.width},scopedSlots:t._u([{key:"default",fn:function(n){return[i("span",[e.type?i("el-select",{staticStyle:{width:"150px"},attrs:{size:"small"},on:{change:function(i){t.setContact(i,n.$index,e.field)}},model:{value:t.contactList[n.$index][e.field],callback:function(i){t.$set(t.contactList[n.$index],e.field,i)},expression:"contactList[scope.$index][v.field]"}},t._l(t.master_user.options,function(t,e){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):i("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(i){t.setContact(i,n.$index,e.field)}},model:{value:t.contactList[n.$index][e.field],callback:function(i){t.$set(t.contactList[n.$index],e.field,i)},expression:"contactList[scope.$index][v.field]"}})],1)]}}])})})],2)],1)],1)},[],!1,null,"304f8600",null);o.options.__file="contact.vue";e.default=o.exports},YEIV:function(t,e,i){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i("SEkw"));e.default=function(t,e,i){return e in t?(0,n.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},cZbU:function(t,e,i){"use strict";var n=i("JQMN");i.n(n).a},g0rm:function(t,e,i){"use strict";i.r(e);var n=i("41Be"),r=i("prnK"),s=i("3ADX"),a=i("Al3y"),o={mixins:[s.a],components:{eForm:a.default},data:function(){return{isAdd:!1,delLoading:!1,id:""}},created:function(){var t=this;this.$nextTick(function(){t.init()})},methods:{checkPermission:n.a,beforeInit:function(){this.showButton=!1,this.url="api/querySupplierInfoPage";var t=this.query.value;return this.params={page:this.page,size:this.size},t&&(this.params.name=t),!0},add:function(){this.isAdd=!0,this.$refs.form.dialog=!0},edit:function(t){var e=this;Object(r.d)(t.id).then(function(i){e.isAdd=!1,e.id=t.id;var n=e.$refs.form;n.dialog=!0,n.form=i})},handleCurrentChange:function(t){},subDelete:function(t){var e=this;this.delLoading=!0,Object(r.b)(t).then(function(i){e.delLoading=!1,e.$refs[t].doClose(),e.dleChangePage(),e.init(),e.$notify({title:"删除成功",type:"success",duration:2500})}).catch(function(i){e.delLoading=!1,e.$refs[t].doClose(),console.log(i.response.data.message)})}}},l=(i("cZbU"),i("KHd+")),c=Object(l.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("eForm",{ref:"form",attrs:{"is-add":t.isAdd}}),t._v(" "),i("div",{staticClass:"head-container"},[i("div",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","SUPPLIER_INFO_ALL","SUPPLIER_INFO_CREATE"],expression:"['ADMIN','SUPPLIER_INFO_ALL','SUPPLIER_INFO_CREATE']"}],staticStyle:{display:"inline-block",margin:"0px 2px"}},[i("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.add}},[t._v("新增")])],1)]),t._v(" "),i("el-row",{attrs:{gutter:5}},[i("el-col",[i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,border:"","highlight-current-row":"",size:"small","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}},on:{"current-change":t.handleCurrentChange}},[t.checkPermission(["ADMIN","SUPPLIER_INFO_ALL"])?i("el-table-column",{attrs:{label:"操作",width:"130px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","SUPPLIER_INFO_ALL","SUPPLIER_INFO_EDIT"],expression:"['ADMIN','SUPPLIER_INFO_ALL','SUPPLIER_INFO_EDIT']"}],attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){t.edit(e.row)}}}),t._v(" "),i("el-popover",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","SUPPLIER_INFO_ALL","SUPPLIER_INFO_DELETE"],expression:"['ADMIN','SUPPLIER_INFO_ALL','SUPPLIER_INFO_DELETE']"}],ref:e.row.id,attrs:{placement:"top",width:"180"}},[i("p",[t._v("确定删除本条数据吗？")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",margin:"0"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){t.$refs[e.row.id].doClose()}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{loading:t.delLoading,type:"primary",size:"mini"},on:{click:function(i){t.subDelete(e.row.id)}}},[t._v("确定")])],1),t._v(" "),i("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"})],1)]}}])}):t._e(),t._v(" "),i("el-table-column",{attrs:{prop:"supplierCategoryName",label:"类别"}}),t._v(" "),i("el-table-column",{attrs:{prop:"supplierCode",label:"供应商编号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"firstContactName",label:"首要联系人"}}),t._v(" "),i("el-table-column",{attrs:{prop:"firstContactMobile",label:"手机"}}),t._v(" "),i("el-table-column",{attrs:{prop:"initialPreMoney",label:"应付款余额"}})],1),t._v(" "),i("el-pagination",{staticStyle:{"margin-top":"8px"},attrs:{total:t.total,"current-page":t.page+1,layout:"total, prev, pager, next, sizes"},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1)],1)],1)],1)},[],!1,null,"4682ef7c",null);c.options.__file="index.vue";e.default=c.exports},"gDS+":function(t,e,i){t.exports={default:i("oh+g"),__esModule:!0}},m3v1:function(t,e,i){},"oh+g":function(t,e,i){var n=i("WEpk"),r=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},opeI:function(t,e,i){},prnK:function(t,e,i){"use strict";i.d(e,"e",function(){return r}),i.d(e,"a",function(){return s}),i.d(e,"c",function(){return a}),i.d(e,"b",function(){return o}),i.d(e,"d",function(){return l});var n=i("t3Un");function r(){return Object(n.a)({url:"api/initSupplierCode",method:"get"})}function s(t){return Object(n.a)({url:"api/supplierInfo",method:"post",data:t})}function a(t){return Object(n.a)({url:"api/updateSupplierInfo",method:"put",data:t})}function o(t){return Object(n.a)({url:"api/supplierInfo/"+t,method:"delete"})}function l(t){return Object(n.a)({url:"api/supplierInfo/"+t,method:"get"})}},sYzC:function(t,e,i){"use strict";var n=i("TIGl");i.n(n).a},xGpv:function(t,e,i){"use strict";var n=i("m3v1");i.n(n).a}}]);