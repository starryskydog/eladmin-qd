(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-273c","chunk-ab9c","chunk-126e"],{CFFI:function(t,e,i){"use strict";i.r(e);var s=i("EJiy"),n=i.n(s),r=i("vDqi"),o=i.n(r),a={props:["propList"],data:function(){return{mapJson:"../../../static/map.json",provinceList:[],shi1:[],qu1:[],cityList:[],block:[],addressList:[]}},created:function(){this.getCityData(),this.addressList=this.propList},watch:{propList:function(t){this.addressList=t}},methods:{getCityData:function(){var t=this;o.a.get(this.mapJson).then(function(e){if(200===e.status){var i=e.data;for(var s in t.provinceList=[],t.cityList=[],t.block=[],i)s.match(/0000$/)?t.provinceList.push({id:s,value:i[s],children:[]}):s.match(/00$/)?t.cityList.push({id:s,value:i[s],children:[]}):t.block.push({id:s,value:i[s]});for(var n in t.provinceList)for(var r in t.cityList)t.provinceList[n].id.slice(0,2)===t.cityList[r].id.slice(0,2)&&t.provinceList[n].children.push(t.cityList[r]);for(var o in t.cityList)for(var a in t.block)t.block[a].id.slice(0,4)===t.cityList[o].id.slice(0,4)&&t.cityList[o].children.push(t.block[a])}else console.log(e.status)}).catch(function(t){console.log(n()(+t))})},choseProvince:function(t,e){for(var i in this.provinceList)t===this.provinceList[i].id&&(this.shi1=this.provinceList[i].children,this.addressList[e].city=this.provinceList[i].children[0].value,this.qu1=this.provinceList[i].children[0].children,this.addressList[e].area=this.provinceList[i].children[0].children[0].value,this.E=this.qu1[0].id,this.addressList[e].province=this.provinceList[i].value);this.setAddress()},choseCity:function(t,e){for(var i in this.cityList)t===this.cityList[i].id&&(this.qu1=this.cityList[i].children,this.addressList[e].area=this.cityList[i].children[0].value,this.E=this.qu1[0].id,this.addressList[e].city=this.cityList[i].value);this.setAddress()},choseBlock:function(t,e){for(var i in this.E=t,this.block)t===this.block[i].id&&(this.addressList[e].area=this.block[i].value);this.setAddress()},add:function(){this.propList.push({province:"",city:"",area:"",addressDetail:""})},subDelete:function(t){t>0?this.propList.splice(t,1):this.$notify({title:"至少保留一行",type:"warning",duration:2500})},setAddress:function(){this.$emit("setAddress",this.propList)}}},c=(i("uH/4"),i("KHd+")),l=Object(c.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"linkage"},t._l(t.addressList,function(e,s){return i("div",{key:s,staticStyle:{"margin-bottom":"20px"}},[i("span",{staticClass:"label"},[t._v("\n      联系地址"+t._s(s+1)+"：\n    ")]),t._v(" "),i("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"省级地区"},on:{change:function(e){t.choseProvince(e,s)}},model:{value:e.province,callback:function(i){t.$set(e,"province",i)},expression:"v.province"}},t._l(t.provinceList,function(t){return i("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),i("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"市级地区"},on:{change:function(e){t.choseCity(e,s)}},model:{value:e.city,callback:function(i){t.$set(e,"city",i)},expression:"v.city"}},t._l(t.shi1,function(t){return i("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),i("el-select",{staticStyle:{width:"100px"},attrs:{size:"small",placeholder:"区级地区"},on:{change:function(e){t.choseBlock(e,s)}},model:{value:e.area,callback:function(i){t.$set(e,"area",i)},expression:"v.area"}},t._l(t.qu1,function(t){return i("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),t._v(" "),i("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"详细地址",size:"small"},on:{change:t.setAddress},model:{value:e.addressDetail,callback:function(i){t.$set(e,"addressDetail",i)},expression:"v.addressDetail"}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.add}},[t._v("添加")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){t.subDelete(s)}}},[t._v("删除")])],1)}))},[],!1,null,"183f1878",null);l.options.__file="address.vue";e.default=l.exports},DDuF:function(t,e,i){},LPW8:function(t,e,i){"use strict";i.d(e,"e",function(){return n}),i.d(e,"f",function(){return r}),i.d(e,"a",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"b",function(){return c}),i.d(e,"d",function(){return l});var s=i("t3Un");function n(){return Object(s.a)({url:"api/initCustomerCode",method:"get"})}function r(t){return Object(s.a)({url:"api/queryCustomerInfoPage",method:"get",params:t})}function o(t){return Object(s.a)({url:"api/customerInfo",method:"post",data:t})}function a(t){return Object(s.a)({url:"api/customerInfo/update",method:"put",data:t})}function c(t){return Object(s.a)({url:"api/customerInfo/"+t,method:"delete"})}function l(t){return Object(s.a)({url:"api/customerInfo/"+t,method:"get"})}},Lil1:function(t,e,i){"use strict";i.r(e);var s=i("gDS+"),n=i.n(s),r={props:["contactList"],data:function(){return{master_user:{sel:null,columns:[{field:"name",title:"联系人",width:120},{field:"mobile",title:"手机",width:120},{field:"phone",title:"座机",width:160},{field:"email",title:"邮箱",width:160},{field:"weixin",title:"微信",width:120},{field:"qq",title:"QQ",width:120},{field:"firstTag",title:"首要联系人",width:120,type:"select"}],data:[],options:[{id:1,name:"是"},{id:0,name:"否"}]}}},created:function(){this.addMasterUser(),this.master_user.data=this.contactList},watch:{contactList:function(t){this.master_user.data=t}},methods:{setContact:function(){this.$emit("setContacts",this.master_user.data)},addMasterUser:function(){var t={name:"",phone:"",mobile:"",email:"",weixin:"",qq:"",firstTag:""};this.master_user.data.push(t),this.master_user.sel=JSON.parse(n()(t))},del:function(t){this.master_user.data.length>1?this.master_user.data.splice(t,1):this.$message.warning("至少保留一项")}}},o=(i("wS1t"),i("KHd+")),a=Object(o.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",[i("el-col",[i("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:t.master_user.data,border:"","highlight-current-row":"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}}},[i("el-table-column",{attrs:{label:"操作",width:"100",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"el-tag el-tag--danger el-tag--mini",staticStyle:{cursor:"pointer"},on:{click:function(i){t.del(e.$index)}}},[t._v("\n                              删除\n                          ")]),t._v(" "),i("span",{staticClass:"el-tag  el-tag--mini",staticStyle:{cursor:"pointer"},on:{click:function(e){t.addMasterUser()}}},[t._v("\n                              添加\n                          ")])]}}])}),t._v(" "),t._l(t.master_user.columns,function(e,s){return i("el-table-column",{key:e.field,attrs:{prop:e.field,label:e.title,width:e.width},scopedSlots:t._u([{key:"default",fn:function(s){return[i("span",[e.type?i("el-select",{staticStyle:{width:"150px"},attrs:{size:"small"},on:{change:function(i){t.setContact(i,s.$index,e.field)}},model:{value:t.contactList[s.$index][e.field],callback:function(i){t.$set(t.contactList[s.$index],e.field,i)},expression:"contactList[scope.$index][v.field]"}},t._l(t.master_user.options,function(t,e){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})):i("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(i){t.setContact(i,s.$index,e.field)}},model:{value:t.contactList[s.$index][e.field],callback:function(i){t.$set(t.contactList[s.$index],e.field,i)},expression:"contactList[scope.$index][v.field]"}})],1)]}}])})})],2)],1)],1)},[],!1,null,"63dcaf3e",null);a.options.__file="contact.vue";e.default=a.exports},ck2I:function(t,e,i){"use strict";var s=i("tNoh");i.n(s).a},e3oJ:function(t,e,i){"use strict";i.r(e);var s=i("LPW8"),n=i("Lil1"),r=i("CFFI"),o={components:{contact:n.default,Address:r.default},props:{isAdd:{type:Boolean,required:!0},uid:{type:Number}},data:function(){return{dialog:!1,categoryList:[],form:{customerContact:[{name:"",phone:"",mobile:"",email:"",weixin:"",qq:"",firstTag:""}],customerName:"",initialPreMoney:null,customerCode:null,customerAddress:[{province:"",city:"",area:"",addressDetail:""}],supplierCategoryId:null,remark:""},rules:{customerName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]}}},watch:{dialog:function(t){t&&this.isAdd&&this.initCode()}},created:function(){},methods:{cancel:function(){this.dialog=!1},doSubmit:function(){var t=this;if(this.form.customerContact){var e=this.form.customerContact.length;e>0&&!this.form.customerContact[e-1].name&&this.form.customerContact.pop()}if(this.form.customerAddress){var i=this.form.customerAddress.length;i>0&&!this.form.customerAddress[i-1].province&&this.form.customerAddress.pop()}this.isAdd?Object(s.a)(this.form).then(function(e){t.$notify({title:"添加成功",type:"success",duration:2500}),t.resetForm(),t.dialog=!1,t.$parent.init()}):Object(s.c)(this.form).then(function(e){t.$notify({title:"修改成功",type:"success",duration:2500}),t.resetForm(),t.dialog=!1,t.$parent.init()})},initCode:function(){var t=this;Object(s.e)().then(function(e){t.resetForm(),t.form.customerCode=e})},resetForm:function(){this.form={customerContact:[{name:"",phone:"",mobile:"",email:"",weixin:"",qq:"",firstTag:""}],customerName:"",initialPreMoney:null,customerAddress:[{province:"",city:"",area:"",addressDetail:""}],customerCategoryId:null,remark:""}},updateContact:function(t){this.form.customerContact=t},updateAddress:function(t){this.form.customerAddress=t}}},a=(i("ck2I"),i("KHd+")),c=Object(a.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialog,title:t.isAdd?"新增客户资料":"编辑客户资料","append-to-body":"",width:"1000px","show-close":!1},on:{"update:visible":function(e){t.dialog=e}}},[i("el-form",{ref:"form",attrs:{inline:!0,model:t.form,size:"large","label-width":"100px"}},[i("el-form-item",{attrs:{label:"客户编号",prop:"customerCode"}},[i("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.form.customerCode,callback:function(e){t.$set(t.form,"customerCode",e)},expression:"form.customerCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[i("el-input",{attrs:{size:"small"},model:{value:t.form.customerName,callback:function(e){t.$set(t.form,"customerName",e)},expression:"form.customerName"}})],1),t._v(" "),i("el-form-item",{staticStyle:{display:"block","margin-top":"20px"},attrs:{label:"期初应付款",prop:"initialPreMoney"}},[i("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.form.initialPreMoney,callback:function(e){t.$set(t.form,"initialPreMoney",e)},expression:"form.initialPreMoney"}})],1),t._v(" "),i("Address",{attrs:{propList:t.form.customerAddress},on:{setAddress:t.updateAddress}}),t._v(" "),i("contact",{attrs:{contactList:t.form.customerContact},on:{setContacts:t.updateContact}}),t._v(" "),i("el-form-item",{attrs:{prop:"remark"}},[i("el-input",{staticStyle:{margin:"20px auto",width:"500px"},attrs:{type:"textarea",placeholder:"请输入备注",autosize:{minRows:4,maxRows:8}},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.doSubmit}},[t._v("确认")])],1)],1)},[],!1,null,"00804340",null);c.options.__file="form.vue";e.default=c.exports},"gDS+":function(t,e,i){t.exports={default:i("oh+g"),__esModule:!0}},"oh+g":function(t,e,i){var s=i("WEpk"),n=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},qwFS:function(t,e,i){},tNoh:function(t,e,i){},"uH/4":function(t,e,i){"use strict";var s=i("DDuF");i.n(s).a},wS1t:function(t,e,i){"use strict";var s=i("qwFS");i.n(s).a}}]);