(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0fb6"],{Ko2T:function(t,e,n){"use strict";var o=n("uWsn");n.n(o).a},LxGK:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return s});var o=n("t3Un");function i(){return Object(o.a)({url:"api/email",method:"get"})}function a(t){return Object(o.a)({url:"api/email",data:t,method:"put"})}function s(t){return Object(o.a)({url:"api/email",data:t,method:"post"})}},Yfch:function(t,e,n){"use strict";function o(t){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(t)}n.d(e,"a",function(){return o})},gVYw:function(t,e,n){"use strict";n.r(e);var o=n("QbLZ"),i=n.n(o),a=n("L2JU"),s=n("X4fA"),u=n("LxGK"),r=n("Yfch"),c=n("GguQ"),l=n.n(c),f={name:"Index",data:function(){return{headers:{Authorization:"Bearer "+Object(s.a)()},loading:!1,form:{subject:"",tos:[],content:""},tos:[{value:""}],rules:{subject:[{required:!0,message:"标题不能为空",trigger:"blur"}]}}},computed:i()({},Object(a.b)(["imagesUploadApi","qiNiuUploadApi"])),mounted:function(){var t=this,e=new l.a(this.$refs.editor);e.customConfig.uploadImgShowBase64=!0,e.customConfig.uploadImgHeaders=this.headers,e.customConfig.uploadFileName="file",e.customConfig.uploadImgServer=this.imagesUploadApi,e.customConfig.onchange=function(e){t.form.content=e},e.create()},methods:{removeDomain:function(t){var e=this.tos.indexOf(t);-1!==e&&1!==this.tos.length?this.tos.splice(e,1):this.$message({message:"请至少保留一位联系人",type:"warning"})},addDomain:function(){this.tos.push({value:"",key:Date.now()})},doSubmit:function(){var t=this,e=this;this.$refs.form.validate(function(n){if(t.form.tos=[],!n)return!1;var o=!1;if(t.tos.forEach(function(t,n){""===t.value?(e.$message({message:"收件邮箱不能为空",type:"warning"}),o=!0):Object(r.a)(t.value)?e.form.tos.push(t.value):(e.$message({message:"收件邮箱格式错误",type:"warning"}),o=!0)}),o)return!1;t.loading=!0,Object(u.b)(t.form).then(function(e){t.$notify({title:"发送成功",type:"success",duration:2500}),t.loading=!1}).catch(function(e){t.loading=!1,console.log(e.response.data.message)})})}}},m=(n("Ko2T"),n("KHd+")),d=Object(m.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{ref:"form",staticStyle:{"margin-top":"6px"},attrs:{model:t.form,rules:t.rules,size:"small","label-width":"100px"}},[n("el-form-item",{attrs:{label:"邮件标题",prop:"subject"}},[n("el-input",{staticStyle:{width:"40%"},model:{value:t.form.subject,callback:function(e){t.$set(t.form,"subject",e)},expression:"form.subject"}})],1),t._v(" "),t._l(t.tos,function(e,o){return n("el-form-item",{key:e.key,attrs:{label:"收件邮箱"+(0===o?"":o)}},[n("el-input",{staticStyle:{width:"31%"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"domain.value"}}),t._v(" "),n("el-button",{attrs:{icon:"el-icon-plus"},on:{click:t.addDomain}}),t._v(" "),n("el-button",{staticStyle:{"margin-left":"0px"},attrs:{icon:"el-icon-minus"},on:{click:function(n){n.preventDefault(),t.removeDomain(e)}}})],1)}),t._v(" "),n("div",{ref:"editor",staticClass:"editor"}),t._v(" "),n("el-button",{staticStyle:{"margin-left":"1.6%"},attrs:{loading:t.loading,size:"medium",type:"primary"},on:{click:t.doSubmit}},[t._v("发送邮件")])],2)],1)},[],!1,null,"7055a7f1",null);d.options.__file="send.vue";e.default=d.exports},uWsn:function(t,e,n){}}]);