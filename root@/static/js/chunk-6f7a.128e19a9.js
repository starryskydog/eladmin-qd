(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6f7a","chunk-591d","chunk-6340"],{"+Xty":function(t,e,n){},"14Xm":function(t,e,n){t.exports=n("ls82")},"3ADX":function(t,e,n){"use strict";var r=n("14Xm"),i=n.n(r),o=n("4d7F"),a=n.n(o),u=n("D3Ub"),s=n.n(u),c=n("t3Un");function l(t,e){return Object(c.a)({url:t,method:"get",params:e})}e.a={data:function(){return{loading:!0,data:[],page:0,size:10,total:0,url:"",params:{},query:{},time:170,isAdd:!1}},methods:{init:function(){var t=this;return s()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.beforeInit();case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new a.a(function(e,n){t.loading=!0,l(t.url,t.params).then(function(n){t.total=n.totalElements,t.data=n.content,setTimeout(function(){t.loading=!1},t.time),e(n)}).catch(function(e){t.loading=!1,n(e)})}));case 5:case"end":return e.stop()}},e,t)}))()},beforeInit:function(){return!0},pageChange:function(t){this.page=t-1,this.init()},sizeChange:function(t){this.page=0,this.size=t,this.init()},dleChangePage:function(t){void 0===t&&(t=1),this.data.length===t&&0!==this.page&&(this.page=this.page-1)},toQuery:function(){this.page=0,this.init()}}}},"41Be":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("Q2AE");function i(t){if(t&&t instanceof Array&&t.length>0){var e=t;return!!(r.a.getters&&r.a.getters.roles).some(function(t){return e.includes(t)})}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}},"6Iuf":function(t,e,n){},"7yV+":function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return u});var r=n("t3Un");function i(){return Object(r.a)({url:"api/queryMeasureUnitList",method:"get"})}function o(t){return Object(r.a)({url:"api/measureUnit",method:"post",data:t})}function a(t){return Object(r.a)({url:"api/measureUnit",method:"put",data:t})}function u(t){return Object(r.a)({url:"api/measureUnit/"+t,method:"delete"})}},D3Ub:function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n("4d7F"));e.default=function(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,n){return function i(o,a){try{var u=e[o](a),s=u.value}catch(t){return void n(t)}if(!u.done)return r.default.resolve(s).then(function(t){i("next",t)},function(t){i("throw",t)});t(s)}("next")})}}},DVWn:function(t,e,n){},EKvA:function(t,e,n){"use strict";n.r(e);var r=n("gDS+"),i=n.n(r),o=n("qNP8"),a={props:["productInventoryWarningList"],data:function(){return{wareHouseList:[],wareHouseId:"",product_inventory_warning:{sel:null,columns:[{field:"wareHouseCode",title:"仓库编号",width:180,type:"select"},{field:"wareHouseName",title:"仓库名称",width:120},{field:"minimumInventory",title:"最低库存",width:160},{field:"highestInventory",title:"最高库存",width:160}],data:[]}}},watch:{productInventoryWarningList:function(t){this.product_inventory_warning.data=t}},created:function(){this.addProductInventoryWarning(),this.product_inventory_warning.data=this.productInventoryWarningList,this.queryWareHouseList()},methods:{setProductInventoryWarning:function(t,e){var n=this.wareHouseList.filter(function(e){return e.wareHouseCode===t});this.productInventoryWarningList[e].wareHouseName=n[0].name,this.$emit("setProductInventoryWarning",this.product_inventory_warning.data)},addProductInventoryWarning:function(){var t={wareHouseCode:"",wareHouseName:"",minimumInventory:"",highestInventory:""};this.product_inventory_warning.data.push(t),this.product_inventory_warning.sel=JSON.parse(i()(t))},delProductInventoryWarning:function(t){this.product_inventory_warning.data.length>1?this.product_inventory_warning.data.splice(t,1):this.$message.warning("至少保留一项")},queryWareHouseList:function(){var t=this;Object(o.e)().then(function(e){t.wareHouseList=e})}}},u=(n("XRO5"),n("KHd+")),s=Object(u.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[n("el-col",[n("el-table",{staticStyle:{width:"100%"},attrs:{size:"mini",data:t.product_inventory_warning.data,border:"","highlight-current-row":"","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}}},[n("el-table-column",{attrs:{label:"操作",width:"100",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"el-tag el-tag--danger el-tag--mini",staticStyle:{cursor:"pointer"},on:{click:function(n){t.delProductInventoryWarning(e.$index)}}},[t._v("删除")]),t._v(" "),n("span",{staticClass:"el-tag  el-tag--mini",staticStyle:{cursor:"pointer"},on:{click:function(e){t.addProductInventoryWarning()}}},[t._v("添加")])]}}])}),t._v(" "),t._l(t.product_inventory_warning.columns,function(e,r){return n("el-table-column",{key:e.field,attrs:{prop:e.field,label:e.title,width:e.width},scopedSlots:t._u([{key:"default",fn:function(r){return[n("span",[e.type?n("el-select",{staticStyle:{width:"180px"},attrs:{size:"small"},on:{change:function(n){t.setProductInventoryWarning(n,r.$index,e.field)}},model:{value:t.productInventoryWarningList[r.$index][e.field],callback:function(n){t.$set(t.productInventoryWarningList[r.$index],e.field,n)},expression:"productInventoryWarningList[scope.$index][v.field]"}},t._l(t.wareHouseList,function(t,e){return n("el-option",{key:t.id,attrs:{label:t.wareHouseCode,value:t.wareHouseCode}})})):n("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(n){t.setProductInventoryWarning(n,r.$index,e.field)}},model:{value:t.productInventoryWarningList[r.$index][e.field],callback:function(n){t.$set(t.productInventoryWarningList[r.$index],e.field,n)},expression:"productInventoryWarningList[scope.$index][v.field]"}})],1)]}}])})})],2)],1)],1)},[],!1,null,"38e5832a",null);s.options.__file="productInventoryWarning.vue";e.default=s.exports},HIQI:function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return u});var r=n("t3Un");function i(){return Object(r.a)({url:"api/queryProductSeriesList",method:"get"})}function o(t){return Object(r.a)({url:"api/productSeries",method:"post",data:t})}function a(t){return Object(r.a)({url:"api/productSeries",method:"put",data:t})}function u(t){return Object(r.a)({url:"api/productSeries/"+t,method:"delete"})}},I6Jf:function(t,e,n){"use strict";n.r(e);var r=n("41Be"),i=n("K+O6"),o=n("3ADX"),a=n("dPdN"),u={mixins:[o.a],components:{eForm:a.default},data:function(){return{isAdd:!1,id:"",delLoading:!1,dialog:!1}},created:function(){var t=this;this.$nextTick(function(){t.init()})},methods:{checkPermission:r.a,beforeInit:function(){this.url="api/queryProductInfoPage";var t=this.query.value;return this.params={page:this.page,size:this.size},t&&(this.params.name=t),!0},add:function(){this.isAdd=!0,this.$refs.form.dialog=!0},edit:function(t){var e=this;Object(i.d)(t.id).then(function(n){e.isAdd=!1,e.id=t.id;var r=e.$refs.form;r.dialog=!0,r.form=n})},handleCurrentChange:function(t){},subDelete:function(t){var e=this;this.delLoading=!0,Object(i.b)(t).then(function(n){e.delLoading=!1,e.$refs[t].doClose(),e.dleChangePage(),e.init(),e.$notify({title:"删除成功",type:"success",duration:2500})}).catch(function(n){e.delLoading=!1,e.$refs[t].doClose(),console.log(n.response.data.message)})}}},s=(n("pDpG"),n("KHd+")),c=Object(s.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("eForm",{ref:"form",attrs:{"is-add":t.isAdd}}),t._v(" "),n("div",{staticClass:"head-container"},[n("div",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN"," PRODUCT_INFO_ALL"," PRODUCT_INFO_CREATE"],expression:"['ADMIN',' PRODUCT_INFO_ALL',' PRODUCT_INFO_CREATE']"}],staticStyle:{display:"inline-block",margin:"0px 2px"}},[n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.add}},[t._v("新增")])],1)]),t._v(" "),n("el-row",{attrs:{gutter:5}},[n("el-col",[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,border:"","highlight-current-row":"",size:"small","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}},on:{"current-change":t.handleCurrentChange}},[t.checkPermission(["ADMIN","PRODUCT_INFO_ALL"])?n("el-table-column",{attrs:{label:"操作",width:"130px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","PRODUCT_INFO_ALL","PRODUCT_INFO_EDIT"],expression:"['ADMIN','PRODUCT_INFO_ALL','PRODUCT_INFO_EDIT']"}],attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(n){t.edit(e.row)}}}),t._v(" "),n("el-popover",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","PRODUCT_INFO_ALL","PRODUCT_INFO_DELETE"],expression:"['ADMIN','PRODUCT_INFO_ALL','PRODUCT_INFO_DELETE']"}],ref:e.row.id,attrs:{placement:"top",width:"180"}},[n("p",[t._v("确定删除本条数据吗？")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){t.$refs[e.row.id].doClose()}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.delLoading,type:"primary",size:"mini"},on:{click:function(n){t.subDelete(e.row.id)}}},[t._v("确定")])],1),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"})],1)]}}])}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"productCategoryName",label:"产品类别"}}),t._v(" "),n("el-table-column",{attrs:{prop:"productSeriesName",label:"产品系列"}}),t._v(" "),n("el-table-column",{attrs:{prop:"productCode",label:"产品编号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"产品名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"specifications",label:"规格"}}),t._v(" "),n("el-table-column",{attrs:{prop:"unitPrice",label:"单价(元)"}})],1),t._v(" "),n("el-pagination",{staticStyle:{"margin-top":"8px"},attrs:{total:t.total,"current-page":t.page+1,layout:"total, prev, pager, next, sizes"},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1)],1)],1)],1)},[],!1,null,"ce207a96",null);c.options.__file="index.vue";e.default=c.exports},"K+O6":function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"f",function(){return u}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return c});var r=n("t3Un");function i(){return Object(r.a)({url:"api/initProductInfoCode",method:"get"})}function o(t){return Object(r.a)({url:"api/productInfo",method:"post",data:t})}function a(t){return Object(r.a)({url:"api/productInfo",method:"put",data:t})}function u(t){return Object(r.a)({url:"api/queryProductInfoPage",method:"get",params:t})}function s(t){return Object(r.a)({url:"api/productInfo/"+t,method:"delete"})}function c(t){return Object(r.a)({url:"api/productInfo/"+t,method:"get"})}},XRO5:function(t,e,n){"use strict";var r=n("DVWn");n.n(r).a},dPdN:function(t,e,n){"use strict";n.r(e);var r=n("K+O6"),i=n("7yV+"),o=n("tfX3"),a=n("HIQI"),u={components:{ProductInventoryWarning:n("EKvA").default},props:{isAdd:{type:Boolean,required:!0}},data:function(){return{dialog:!1,measureUnitList:[],productCategoryList:[],productSeriesList:[],form:{productCode:null,name:"",specifications:"",unitPrice:null,productCategoryId:null,productSeriesId:null,measureUnitId:null,productInventoryWarning:[{wareHouseCode:"",wareHouseName:"",minimumInventory:"",highestInventory:""}]},rules:{specifications:[{required:!0,message:"规格不能为空!",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符!",trigger:"blur"}],productCategoryId:[{required:!0,message:"产品类别不能为空!",trigger:"blur"}],productSeriesId:[{required:!0,message:"产品系列不能为空!",trigger:"blur"}]}}},watch:{dialog:function(t){t&&this.isAdd&&this.initCode()}},created:function(){var t=this;Object(r.e)().then(function(e){t.form.productCode=e}),this.queryMeasureUnitList(),this.queryProductCategoryList(),this.queryProductSeriesList()},methods:{cancelAndGoList:function(){this.dialog=!1},queryMeasureUnitList:function(){var t=this;Object(i.d)().then(function(e){t.measureUnitList=e})},queryProductCategoryList:function(){var t=this;Object(o.d)().then(function(e){t.productCategoryList=e})},queryProductSeriesList:function(){var t=this;Object(a.d)().then(function(e){t.productSeriesList=e.content})},updateProductInventoryWarning:function(t){this.form.productInventoryWarning=t},initCode:function(){var t=this;Object(r.e)().then(function(e){t.resetForm(),t.form.productCode=e})},resetForm:function(){this.form={productCode:null,name:"",specifications:"",unitPrice:null,productCategoryId:null,productSeriesId:null,measureUnitId:null,productInventoryWarning:[{wareHouseCode:"",wareHouseName:"",minimumInventory:"",highestInventory:""}]}},doSubmit:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.isAdd?Object(r.a)(t.form).then(function(e){t.$notify({title:"添加成功",type:"success",duration:2500}),t.resetForm(),t.dialog=!1,t.$parent.init()}):Object(r.c)(t.form).then(function(e){t.$notify({title:"修改成功",type:"success",duration:2500}),t.resetForm(),t.dialog=!1,t.$parent.init()}))})}}},s=(n("vYvV"),n("KHd+")),c=Object(s.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{visible:t.dialog,title:t.isAdd?"新增产品资料":"编辑产品资料","show-close":!1,"append-to-body":"",width:"1000px"},on:{"update:visible":function(e){t.dialog=e}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"large","label-width":"100px"}},[n("span",{staticClass:"sub-title"},[t._v("基础资料")]),t._v(" "),n("el-form-item",{attrs:{label:"产品类别",prop:"productCategoryId"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"small"},model:{value:t.form.productCategoryId,callback:function(e){t.$set(t.form,"productCategoryId",e)},expression:"form.productCategoryId"}},t._l(t.productCategoryList,function(t,e){return n("el-option",{key:t.name+e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"产品系列",prop:"productSeriesId"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"small"},model:{value:t.form.productSeriesId,callback:function(e){t.$set(t.form,"productSeriesId",e)},expression:"form.productSeriesId"}},t._l(t.productSeriesList,function(t,e){return n("el-option",{key:t.productSeriesName+e,attrs:{label:t.productSeriesName,value:t.id}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"产品编号",prop:"productCode"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.productCode,callback:function(e){t.$set(t.form,"productCode",e)},expression:"form.productCode"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"产品名称",prop:"name"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"规格",prop:"specifications"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.specifications,callback:function(e){t.$set(t.form,"specifications",e)},expression:"form.specifications"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"计量单位",prop:"measureUnitId"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"small"},model:{value:t.form.measureUnitId,callback:function(e){t.$set(t.form,"measureUnitId",e)},expression:"form.measureUnitId"}},t._l(t.measureUnitList,function(t,e){return n("el-option",{key:t.name+e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"单价(元)",prop:"unitPrice"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.unitPrice,callback:function(e){t.$set(t.form,"unitPrice",e)},expression:"form.unitPrice"}})],1),t._v(" "),n("span",{staticClass:"sub-title"},[t._v("库存预警")]),t._v(" "),n("ProductInventoryWarning",{attrs:{productInventoryWarningList:t.form.productInventoryWarning},on:{setProductInventoryWarning:t.updateProductInventoryWarning}})],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:t.cancelAndGoList}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doSubmit}},[t._v("保存")])],1)],1)},[],!1,null,"69dcb0ee",null);c.options.__file="form.vue";e.default=c.exports},"gDS+":function(t,e,n){t.exports={default:n("oh+g"),__esModule:!0}},"oh+g":function(t,e,n){var r=n("WEpk"),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},pDpG:function(t,e,n){"use strict";var r=n("6Iuf");n.n(r).a},qNP8:function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return s});var r=n("t3Un");function i(){return Object(r.a)({url:"api/queryWareHouseList",method:"get"})}function o(){return Object(r.a)({url:"api/initWareHouseCode",method:"get"})}function a(t){return Object(r.a)({url:"api/wareHouse",method:"post",data:t})}function u(t){return Object(r.a)({url:"api/wareHouse",method:"put",data:t})}function s(t){return Object(r.a)({url:"api/wareHouse/"+t,method:"delete"})}},tfX3:function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return u});var r=n("t3Un");function i(){return Object(r.a)({url:"api/queryProductCategoryList",method:"get"})}function o(t){return Object(r.a)({url:"api/productCategory",method:"post",data:t})}function a(t){return Object(r.a)({url:"api/productCategory",method:"put",data:t})}function u(t){return Object(r.a)({url:"api/productCategory/"+t,method:"delete"})}},vYvV:function(t,e,n){"use strict";var r=n("+Xty");n.n(r).a}}]);