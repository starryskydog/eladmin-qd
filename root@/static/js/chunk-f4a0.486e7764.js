(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f4a0","chunk-5b2d"],{"5WvE":function(t,e,n){"use strict";var i=n("ImJz");n.n(i).a},"7yV+":function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return l});var i=n("t3Un");function r(){return Object(i.a)({url:"api/queryMeasureUnitList",method:"get"})}function a(t){return Object(i.a)({url:"api/measureUnit",method:"post",data:t})}function o(t){return Object(i.a)({url:"api/measureUnit",method:"put",data:t})}function l(t){return Object(i.a)({url:"api/measureUnit/"+t,method:"delete"})}},FOrt:function(t,e,n){},"Hw/y":function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return l}),n.d(e,"d",function(){return s});var i=n("t3Un");function r(){return Object(i.a)({url:"api/initMaterialInfoCode",method:"get"})}function a(t){return Object(i.a)({url:"api/materialInfo",method:"post",data:t})}function o(t){return Object(i.a)({url:"api/materialInfo/update",method:"put",data:t})}function l(t){return Object(i.a)({url:"api/materialInfo/"+t,method:"delete"})}function s(t){return Object(i.a)({url:"api/materialInfo/"+t,method:"get"})}},ImJz:function(t,e,n){},Jjsq:function(t,e,n){"use strict";n.r(e);var i=n("Hw/y"),r=n("7yV+"),a=n("ZH/N"),o={components:{MaterialInventoryWarning:n("r7eE").default},props:{isAdd:{type:Boolean,required:!0}},data:function(){return{dialog:!1,measureUnitList:[],materialCategoryList:[],form:{materialCode:null,name:"",specifications:"",materialCategoryId:null,measureUnitId:null,materialInventoryWarning:[{wareHouseCode:"",wareHouseName:"",minimumInventory:"",highestInventory:""}]},rules:{specifications:[{required:!0,message:"规格不能为空!",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符!",trigger:"blur"}],name:[{required:!0,message:"物料不能为空!",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符!",trigger:"blur"}],materialCategoryId:[{required:!0,message:"物料类别不能为空!",trigger:"blur"}],measureUnitId:[{required:!0,message:"计量单位不能为空!",trigger:"blur"}],materialCode:[{required:!0,message:"物料编号不能为空!",trigger:"blur"}]}}},watch:{dialog:function(t){t&&this.isAdd&&this.initCode()}},created:function(){var t=this;Object(i.e)().then(function(e){t.form.materialCode=e}),this.queryMeasureUnitList(),this.queryMaterialCategoryList()},methods:{cancelAndGoList:function(){this.dialog=!1},queryMeasureUnitList:function(){var t=this;Object(r.d)().then(function(e){t.measureUnitList=e})},queryMaterialCategoryList:function(){var t=this;Object(a.d)().then(function(e){t.materialCategoryList=e})},updateMaterialInventoryWarning:function(t){this.form.materialInventoryWarning=t},initCode:function(){var t=this;Object(i.e)().then(function(e){t.resetForm(),t.form.materialCode=e})},resetForm:function(){this.form={materialCode:null,name:"",specifications:"",materialCategoryId:null,measureUnitId:null,materialInventoryWarning:[{wareHouseCode:"",wareHouseName:"",minimumInventory:"",highestInventory:""}]}},doSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.isAdd?Object(i.a)(t.form).then(function(e){t.$notify({title:"添加成功",type:"success",duration:2500}),t.loading=!1,t.resetForm(),t.dialog=!1,t.$parent.init()}):Object(i.c)(t.form).then(function(e){t.$notify({title:"修改成功",type:"success",duration:2500}),t.resetForm(),t.dialog=!1,t.$parent.init()})})},addMaterialInfo:function(){var t=this;if(this.form.materialContact){var e=this.form.materialInventoryWarning.length;e>0&&!this.form.materialContact[e-1].name&&this.form.materialInventoryWarning.pop()}this.isAdd?Object(i.a)(this.form).then(function(e){t.$notify({title:"添加成功",type:"success",duration:2500}),t.loading=!1,t.resetForm(),t.dialog=!1,t.$parent.init()}):Object(i.c)(this.form).then(function(e){t.$notify({title:"修改成功",type:"success",duration:2500}),t.loading=!1,t.resetForm(),t.dialog=!1,t.$parent.init()})}}},l=(n("5WvE"),n("KHd+")),s=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{visible:t.dialog,title:t.isAdd?"新增物料资料":"编辑物料资料","show-close":!1,"append-to-body":"",width:"1000px"},on:{"update:visible":function(e){t.dialog=e}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:t.form,rules:t.rules,size:"large","label-width":"100px"}},[n("span",{staticClass:"sub-title"},[t._v("基础资料")]),t._v(" "),n("el-form-item",{attrs:{label:"物料类别",prop:"materialCategoryId"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"small"},model:{value:t.form.materialCategoryId,callback:function(e){t.$set(t.form,"materialCategoryId",e)},expression:"form.materialCategoryId"}},t._l(t.materialCategoryList,function(t,e){return n("el-option",{key:t.name+e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"物料编号",prop:"materialCode"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.materialCode,callback:function(e){t.$set(t.form,"materialCode",e)},expression:"form.materialCode"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"物料名称",prop:"name"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"规格",prop:"specifications"}},[n("el-input",{attrs:{size:"small"},model:{value:t.form.specifications,callback:function(e){t.$set(t.form,"specifications",e)},expression:"form.specifications"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"计量单位",prop:"measureUnitId"}},[n("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"small"},model:{value:t.form.measureUnitId,callback:function(e){t.$set(t.form,"measureUnitId",e)},expression:"form.measureUnitId"}},t._l(t.measureUnitList,function(t,e){return n("el-option",{key:t.name+e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),n("span",{staticClass:"sub-title"},[t._v("库存预警")]),t._v(" "),n("MaterialInventoryWarning",{attrs:{materialInventoryWarningList:t.form.materialInventoryWarning},on:{setMaterialInventoryWarning:t.updateMaterialInventoryWarning}})],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:t.cancelAndGoList}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.doSubmit}},[t._v("保存")])],1)],1)},[],!1,null,"5ae2ed8e",null);s.options.__file="form.vue";e.default=s.exports},O1Q0:function(t,e,n){"use strict";var i=n("FOrt");n.n(i).a},"ZH/N":function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"a",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return l});var i=n("t3Un");function r(){return Object(i.a)({url:"api/queryMaterialCategoryList",method:"get"})}function a(t){return Object(i.a)({url:"api/materialCategory",method:"post",data:t})}function o(t){return Object(i.a)({url:"api/materialCategory",method:"put",data:t})}function l(t){return Object(i.a)({url:"api/materialCategory/"+t,method:"delete"})}},"gDS+":function(t,e,n){t.exports={default:n("oh+g"),__esModule:!0}},"oh+g":function(t,e,n){var i=n("WEpk"),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},qNP8:function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"d",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return l}),n.d(e,"b",function(){return s});var i=n("t3Un");function r(){return Object(i.a)({url:"api/queryWareHouseList",method:"get"})}function a(){return Object(i.a)({url:"api/initWareHouseCode",method:"get"})}function o(t){return Object(i.a)({url:"api/wareHouse",method:"post",data:t})}function l(t){return Object(i.a)({url:"api/wareHouse",method:"put",data:t})}function s(t){return Object(i.a)({url:"api/wareHouse/"+t,method:"delete"})}},r7eE:function(t,e,n){"use strict";n.r(e);var i=n("gDS+"),r=n.n(i),a=n("qNP8"),o={props:["materialInventoryWarningList"],data:function(){return{wareHouseList:[],wareHouseId:"",material_inventory_warning:{sel:null,columns:[{field:"wareHouseCode",title:"仓库编号",width:180,type:"select"},{field:"wareHouseName",title:"仓库名称",width:120},{field:"miniNumInventory",title:"最低库存",width:160},{field:"highestInventory",title:"最高库存",width:160}],data:[]}}},watch:{materialInventoryWarningList:function(t){this.material_inventory_warning.data=t}},created:function(){this.addMaterialInventoryWarning(),this.material_inventory_warning.data=this.materialInventoryWarningList,this.queryWareHouseList()},methods:{setMaterialInventoryWarning:function(t,e){var n=this.wareHouseList.filter(function(e){return e.wareHouseCode===t});n.length>0&&(this.materialInventoryWarningList[e].wareHouseName=n[0].name),this.$emit("setMaterialInventoryWarning",this.material_inventory_warning.data)},addMaterialInventoryWarning:function(){var t={wareHouseCode:"",wareHouseName:"",miniNumInventory:"",highestInventory:""};this.material_inventory_warning.data.push(t),this.material_inventory_warning.sel=JSON.parse(r()(t))},delMaterialInventoryWarning:function(t){this.material_inventory_warning.data.length>1?this.material_inventory_warning.data.splice(t,1):this.$message.warning("至少保留一项")},queryWareHouseList:function(){var t=this;Object(a.e)().then(function(e){t.wareHouseList=e})}}},l=(n("O1Q0"),n("KHd+")),s=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[n("el-col",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.material_inventory_warning.data,"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},size:"mini",border:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"操作",width:"100",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"el-tag el-tag--danger el-tag--mini",staticStyle:{cursor:"pointer"},on:{click:function(n){t.delMaterialInventoryWarning(e.$index)}}},[t._v("删除")]),t._v(" "),n("span",{staticClass:"el-tag  el-tag--mini",staticStyle:{cursor:"pointer"},on:{click:function(e){t.addMaterialInventoryWarning()}}},[t._v("添加")])]}}])}),t._v(" "),t._l(t.material_inventory_warning.columns,function(e,i){return n("el-table-column",{key:e.field,attrs:{prop:e.field,label:e.title,width:e.width},scopedSlots:t._u([{key:"default",fn:function(i){return[n("span",[e.type?n("el-select",{staticStyle:{width:"180px"},attrs:{size:"small"},on:{change:function(n){t.setMaterialInventoryWarning(n,i.$index,e.field)}},model:{value:t.materialInventoryWarningList[i.$index][e.field],callback:function(n){t.$set(t.materialInventoryWarningList[i.$index],e.field,n)},expression:"materialInventoryWarningList[scope.$index][v.field]"}},t._l(t.wareHouseList,function(t,e){return n("el-option",{key:t.id,attrs:{label:t.wareHouseCode,value:t.wareHouseCode}})})):n("el-input",{attrs:{size:"mini",placeholder:"请输入内容"},on:{change:function(n){t.setMaterialInventoryWarning(n,i.$index,e.field)}},model:{value:t.materialInventoryWarningList[i.$index][e.field],callback:function(n){t.$set(t.materialInventoryWarningList[i.$index],e.field,n)},expression:"materialInventoryWarningList[scope.$index][v.field]"}})],1)]}}])})})],2)],1)],1)},[],!1,null,"44d54c09",null);s.options.__file="materialInventoryWarning.vue";e.default=s.exports}}]);